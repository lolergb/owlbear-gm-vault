<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DM screen</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Permanent+Marker&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/notion-markdown.css">
  <link rel="stylesheet" href="css/app.css">
</head>
<body>
  <div class="container">
    <div id="header" class="header">
      <button id="back-button" class="back-button hidden">‚Üê Volver</button>
      <h1 id="page-title">DM screen</h1>
    </div>
    <div id="page-list" class="page-list">
      <!-- Las p√°ginas se cargar√°n aqu√≠ din√°micamente -->
    </div>
    <div id="notion-container" class="notion-container hidden notion-container-dark">
      <iframe id="notion-iframe" src="" frameborder="0" allowfullscreen></iframe>
      <div id="notion-content" class="notion-content"></div>
    </div>
    <div id="token-config-container" class="token-config-container hidden">
      <div class="token-config-header">
        <button id="back-from-token" class="token-back-button">‚Üê Volver</button>
        <h1 class="token-config-title">üîë Configurar Token de Notion</h1>
      </div>
      <div class="token-config-content">
        <div class="token-config-section">
          <p class="token-config-description">
            Configura tu token de Notion para usar tus propias p√°ginas. Este token es global para toda la extensi√≥n (todas las rooms).
          </p>
          
          <div class="token-config-info-box">
            <h3 class="token-config-info-title">üìù C√≥mo obtener tu token:</h3>
            <ol class="token-config-info-list">
              <li>Ve a <a href="https://www.notion.so/my-integrations" target="_blank" class="token-config-link">notion.so/my-integrations</a></li>
              <li><strong>Crea una nueva integraci√≥n:</strong>
                <ul class="token-config-info-sublist">
                  <li>Clic en <strong>"+ Nueva integraci√≥n"</strong></li>
                  <li>Dale un nombre (ej: "Owlbear Notion")</li>
                  <li>Selecciona el workspace donde est√°n tus p√°ginas</li>
                  <li>Clic en <strong>"Enviar"</strong></li>
                </ul>
              </li>
              <li><strong>Copia el token:</strong>
                <ul class="token-config-info-sublist">
                  <li>En la p√°gina de la integraci√≥n, busca <strong>"Internal Integration Token"</strong></li>
                  <li>Clic en <strong>"Mostrar"</strong> y copia el token completo</li>
                </ul>
              </li>
              <li><strong>Comparte tus p√°ginas:</strong>
                <ul class="token-config-info-sublist">
                  <li>En Notion, abre cada p√°gina que quieres usar</li>
                  <li>Clic en <strong>"Compartir"</strong> (arriba a la derecha)</li>
                  <li>Busca el nombre de tu integraci√≥n y dale acceso</li>
                </ul>
              </li>
              <li>Pega el token en el campo de abajo y guarda</li>
            </ol>
          </div>
          
          <div class="token-config-input-group">
            <label class="token-config-label">
              Token de Notion:
            </label>
            <input 
              type="password" 
              id="token-input" 
              placeholder="ntn_... o secret_..." 
              class="token-config-input"
            />
            <p id="token-masked" class="token-config-masked"></p>
          </div>
          
          <div id="token-error" class="token-config-error"></div>
          
          <div class="token-config-actions">
            <div class="token-config-buttons-row">
              <button id="view-json-btn" class="token-config-button">Ver JSON</button>
              <button id="load-json-btn" class="token-config-button">Cargar JSON</button>
              <button id="download-json-btn" class="token-config-button">Descargar JSON</button>
            </div>
            <div class="token-config-buttons-row">
              <button id="clear-token" class="token-config-button token-config-button-secondary">Eliminar Token</button>
              <button id="save-token" class="token-config-button token-config-button-primary">Guardar Token</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    // Log inmediato para verificar que el HTML se carga
    console.log('üìÑ HTML cargado');
    console.log('üîç Buscando elementos...');
    console.log('page-list:', document.getElementById('page-list') ? '‚úÖ encontrado' : '‚ùå no encontrado');
    console.log('notion-container:', document.getElementById('notion-container') ? '‚úÖ encontrado' : '‚ùå no encontrado');
  </script>
  <script type="module" src="js/index.js"></script>
</body>
</html>

